{
   "index_patterns":[
      "containers-*"
   ],
   "mappings":{
      "_source":{
         "enabled":true
      },
      "dynamic_templates":[
         {
            "commonLabels.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"commonLabels.*"
            }
         },
         {
            "labels.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"labels.*"
            }
         },
         {
            "kubernetes.annotations.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.annotations.*"
            }
         },
         {
            "kubernetes.container.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.container.*"
            }
         }, 
         {
            "kubernetes.labels.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.labels.*"
            }
         },
         {
            "kubernetes.pod.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.pod.*"
            }
         },
         {
            "kubernetes.replicaset.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.replicaset.*"
            }
         },
         {
            "kubernetes.statefulset.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"kubernetes.statefulset.*"
            }
         },
         {
            "host.*":{
               "mapping":{
                  "type":"keyword"
               },
               "match_mapping_type":"*",
               "path_match":"host.*"
            }
         }
      ],
      "properties":{
         "@timestamp":{
            "type":"date"
         },
         "container":{
            "properties":{
               "id":{
                  "type":"keyword",
                  "ignore_above":1024
               },
               "image":{
                  "properties":{
                     "name":{
                        "type":"keyword",
                        "ignore_above":1024
                     }
                  }
               },
               "runtime":{
                  "type":"keyword",
                  "ignore_above":1024
               }
            }
         },
         "kubernetes":{
            "properties":{
               "namespace":{
                  "type":"keyword",
                  "ignore_above":1024
               }
            }
         },
         "message":{
            "type":"text"
         },
         "status":{
            "type":"text",
            "fields":{
               "keyword":{
                  "type":"keyword",
                  "ignore_above":256
               }
            }
         }
      }
   },
   "order":1,
   "settings":{
      "index":{
         "mapping":{
            "total_fields":{
               "limit":10000
            }
         },
         "max_docvalue_fields_search":200,
         "number_of_shards":"{{ .Values.elasticsearch.index_shards }}",
         "number_of_replicas":"{{ .Values.elasticsearch.index_replicas }}",
         "query":{
            "default_field":[
               "message",
               "tags",               
               "container.id",
               "container.image.name",
               "container.image.tag",
               "container.name",
               "container.runtime",                           
               "kubernetes.pod.name",
               "kubernetes.pod.uid",
               "kubernetes.namespace",
               "kubernetes.node.name",
               "kubernetes.node.hostname",
               "kubernetes.replicaset.name",
               "kubernetes.deployment.name",
               "kubernetes.statefulset.name",
               "kubernetes.container.name",
               "kubernetes.container.image",               
               "fields.*"
            ]
         },
         "refresh_interval":"5s"
      }
   }
}